{% extends "layouts/base.html" %}
{% load static %}

{% block title %}Edit User | Jack JJ Club{% endblock title %}

{% block content %}
<div class="content-wrapper">
  <!-- Page Header -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2 align-items-center">
        <div class="col-sm-6">
          <h1>Edit User</h1>
        </div>
        <div class="col-sm-6 text-right">
          <a href="{% url 'users_list' %}" class="btn btn-secondary">
            <i class="fas fa-users"></i> Back to Users
          </a>
        </div>
      </div>
    </div>
  </section>

  <!-- Main Content -->
  <section class="content">
    <div class="container-fluid">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title"><i class="fas fa-user-cog"></i> Update User Details</h3>
            </div>

            <form method="post" enctype="multipart/form-data">
              {% csrf_token %}
              <div class="card-body">
                <!-- Avatar -->
                <div class="form-group text-center">
                  <label>Avatar</label><br>
                  {% if user.avatar %}
                    <img src="{{ MEDIA_URL }}{{ user.avatar }}" class="img-circle mb-2" style="width:100px; height:100px; object-fit:cover;">
                  {% else %}
                    <img src="{% static 'dist/img/user2-160x160.jpg' %}" class="img-circle mb-2" style="width:100px; height:100px; object-fit:cover;">
                  {% endif %}
                  <input type="file" name="avatar" class="form-control mt-2">
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Member ID</label>
                      <input type="text" name="member_id" class="form-control" value="{{ user.member_id }}">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Username</label>
                      <input type="text" name="username" class="form-control" value="{{ user.username }}">
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label>Email</label>
                  <input type="email" name="email" class="form-control" value="{{ user.email }}">
                </div>

                <div class="row">
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>First Name</label>
                      <input type="text" name="first_name" class="form-control" value="{{ user.first_name }}">
                    </div>
                  </div>
                  <div class="col-md-6">
                    <div class="form-group">
                      <label>Last Name</label>
                      <input type="text" name="last_name" class="form-control" value="{{ user.last_name }}">
                    </div>
                  </div>
                </div>

                <div class="form-group">
                  <label>Phone</label>
                  <input type="text" name="phone" class="form-control" value="{{ user.phone }}">
                </div>

                <div class="form-group">
                  <label>Role</label>
                  <select name="role" class="form-control">
                    <option value="member" {% if user.role == "member" %}selected{% endif %}>Member</option>
                    <option value="admin" {% if user.role == "admin" %}selected{% endif %}>Admin</option>
                    <option value="treasurer" {% if user.role == "treasurer" %}selected{% endif %}>Treasurer</option>
                    <option value="secretary" {% if user.role == "secretary" %}selected{% endif %}>Secretary</option>
                    <option value="ict_secretary" {% if user.role == "ict_secretary" %}selected{% endif %}>ICT Secretary</option>
                    <option value="mobilizer" {% if user.role == "mobilizer" %}selected{% endif %}>Mobilizer</option>
                    <option value="signatory" {% if user.role == "signatory" %}selected{% endif %}>Signatory</option>
                  </select>
                </div>

                <div class="form-check">
                  <input type="checkbox" class="form-check-input" name="is_active" id="is_active" {% if user.is_active %}checked{% endif %}>
                  <label class="form-check-label" for="is_active">Active</label>
                </div>
              </div>

              <div class="card-footer text-right">
                <button type="submit" class="btn btn-primary">
                  <i class="fas fa-save"></i> Save Changes
                </button>
                <a href="{% url 'users_list' %}" class="btn btn-secondary">
                  <i class="fas fa-times"></i> Cancel
                </a>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
{% endblock %}
